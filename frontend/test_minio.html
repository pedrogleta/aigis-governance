<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MinIO Frontend Test</title>
</head>
<body>
    <h1>MinIO Frontend Integration Test</h1>
    <div id="status">Testing MinIO connection...</div>
    <div id="fileCount">File count: Loading...</div>
    <div id="latestFile">Latest file: Loading...</div>
    
    <script type="module">
        import { MinioService } from './src/services/minio.js';
        
        async function testMinio() {
            try {
                const statusDiv = document.getElementById('status');
                const fileCountDiv = document.getElementById('fileCount');
                const latestFileDiv = document.getElementById('latestFile');
                
                // Test bucket creation
                statusDiv.textContent = 'Creating bucket...';
                await MinioService.ensureBucket();
                statusDiv.textContent = '✅ Bucket created/verified successfully';
                
                // Test file count
                fileCountDiv.textContent = 'Getting file count...';
                const count = await MinioService.getFileCount();
                fileCountDiv.textContent = `File count: ${count}`;
                
                // Test getting latest file
                latestFileDiv.textContent = 'Getting latest file...';
                const latestFile = await MinioService.getLatestFile();
                if (latestFile) {
                    latestFileDiv.textContent = `Latest file: ${latestFile}`;
                    
                    // Test getting presigned URL
                    const url = await MinioService.getFileUrl(latestFile);
                    console.log('Presigned URL:', url);
                } else {
                    latestFileDiv.textContent = 'Latest file: No files found';
                }
                
            } catch (error) {
                console.error('MinIO test failed:', error);
                document.getElementById('status').textContent = `❌ Error: ${error.message}`;
            }
        }
        
        testMinio();
    </script>
</body>
</html>
